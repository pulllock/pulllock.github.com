<!doctype html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="SpringBoot教程,SpringBoot," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="此为个人学习所用,从pom文件配置,datasource,log配置,到集成druid以及dubbo等都只做了简单的介绍.顺序按照个人习惯,从建立项目,到每项配置挨个进行.SpringBoot零配置,但是此项目还是用到了xml进行配置dubbo等,注解方式暂时没有去做.源码请点此查看">
<meta property="og:type" content="article">
<meta property="og:title" content="SpringBoot简易教程">
<meta property="og:url" content="http://dachengxi.github.com/2016/07/08/SpringBoot简易教程/index.html">
<meta property="og:site_name" content="大程熙">
<meta property="og:description" content="此为个人学习所用,从pom文件配置,datasource,log配置,到集成druid以及dubbo等都只做了简单的介绍.顺序按照个人习惯,从建立项目,到每项配置挨个进行.SpringBoot零配置,但是此项目还是用到了xml进行配置dubbo等,注解方式暂时没有去做.源码请点此查看">
<meta property="og:updated_time" content="2016-07-08T07:11:22.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="SpringBoot简易教程">
<meta name="twitter:description" content="此为个人学习所用,从pom文件配置,datasource,log配置,到集成druid以及dubbo等都只做了简单的介绍.顺序按照个人习惯,从建立项目,到每项配置挨个进行.SpringBoot零配置,但是此项目还是用到了xml进行配置dubbo等,注解方式暂时没有去做.源码请点此查看">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 'undefined',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://dachengxi.github.com/2016/07/08/SpringBoot简易教程/"/>





  <title> SpringBoot简易教程 | 大程熙 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  














  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">大程熙</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">小角落</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-book">
          <a href="/book" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            读书
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            公益404
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocapitalize="off" autocomplete="off" autocorrect="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://dachengxi.github.com/2016/07/08/SpringBoot简易教程/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="dachengxi">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="大程熙">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                SpringBoot简易教程
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-07-08T14:36:41+08:00">
                2016-07-08 14:36:41
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/SpringBoot/" itemprop="url" rel="index">
                    <span itemprop="name">SpringBoot</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2016/07/08/SpringBoot简易教程/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/07/08/SpringBoot简易教程/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>此为个人学习所用,从pom文件配置,datasource,log配置,到集成druid以及dubbo等都只做了简单的介绍.顺序按照个人习惯,从建立项目,到每项配置挨个进行.SpringBoot零配置,但是此项目还是用到了xml进行配置dubbo等,注解方式暂时没有去做.<a href="https://github.com/dachengxi/SpringBootSetup" target="_blank" rel="external">源码请点此查看</a></p>
<a id="more"></a>
<h1 id="构建工具配置"><a href="#构建工具配置" class="headerlink" title="构建工具配置"></a>构建工具配置</h1><h2 id="Maven"><a href="#Maven" class="headerlink" title="Maven"></a>Maven</h2><p>可以使用两种方式:继承starter parent或者使用依赖管理器配置.</p>
<h3 id="继承spring-boot-starter-parent"><a href="#继承spring-boot-starter-parent" class="headerlink" title="继承spring-boot-starter-parent"></a>继承spring-boot-starter-parent</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;parent&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.3.6.RELEASE&lt;/version&gt;</span><br><span class="line">  &lt;/parent&gt;</span><br></pre></td></tr></table></figure>
<p>接着下面的依赖可以指定导入其他的starter.</p>
<h3 id="使用依赖管理"><a href="#使用依赖管理" class="headerlink" title="使用依赖管理"></a>使用依赖管理</h3><p>注意加上<code>&lt;scope&gt;import&lt;/scope&gt;</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependencyManagement&gt;</span><br><span class="line">    &lt;dependencies&gt;</span><br><span class="line">      &lt;dependency&gt;</span><br><span class="line">        &lt;!-- Import dependency management from Spring Boot --&gt;</span><br><span class="line">        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt;</span><br><span class="line">        &lt;version&gt;1.3.6.RELEASE&lt;/version&gt;</span><br><span class="line">        &lt;type&gt;pom&lt;/type&gt;</span><br><span class="line">        &lt;scope&gt;import&lt;/scope&gt;</span><br><span class="line">      &lt;/dependency&gt;</span><br><span class="line">    &lt;/dependencies&gt;</span><br><span class="line">  &lt;/dependencyManagement&gt;</span><br></pre></td></tr></table></figure>
<p>接着下面的依赖可以指定导入其他的starter.</p>
<h2 id="Gradle"><a href="#Gradle" class="headerlink" title="Gradle"></a>Gradle</h2><p>直接添加各个starter依赖,无需配置parent之类的.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    compile(&quot;org.springframework.boot:spring-boot-starter-web:1.3.6.RELEASE&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="spring-boot-starter列表"><a href="#spring-boot-starter列表" class="headerlink" title="spring-boot-starter列表"></a>spring-boot-starter列表</h1><table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>spring-boot-starter</td>
<td>核心starter,包含自动配置支持,日志和 YAML配置文件的支持</td>
</tr>
<tr>
<td>spring-boot-starter-actuator</td>
<td>生产环境,监控和管理应用程序</td>
</tr>
<tr>
<td>spring-boot-starter-amqp</td>
<td>通过 spring-rabbit 支持 AMQP</td>
</tr>
<tr>
<td>spring-boot-starter-aop</td>
<td>包含 spring-aop 和 AspectJ 来支持面向切面编程（AOP）</td>
</tr>
<tr>
<td>spring-boot-starter-artemis</td>
<td>通过Apache Artemis支持JMS API</td>
</tr>
<tr>
<td>spring-boot-starter-batch</td>
<td>支持Spring Batch包括HSQLDB</td>
</tr>
<tr>
<td>spring-boot-starter-cache</td>
<td>支持Spring Cache抽象化</td>
</tr>
<tr>
<td>spring-boot-starter-cloud-connectors</td>
<td>对Spring Cloud Connectors的支持，简化在云平台下（例如，Cloud Foundry 和Heroku）服务的连接</td>
</tr>
<tr>
<td>spring-boot-starter-data-elasticsearch</td>
<td>对Elasticsearch搜索和分析引擎的支持，包括spring-data-elasticsearch</td>
</tr>
<tr>
<td>spring-boot-starter-data-gemfire</td>
<td>对GemFire分布式数据存储的支持，包括spring-data-gemfire</td>
</tr>
<tr>
<td>spring-boot-starter-data-jpa</td>
<td>包含spring-data-jpa,spring-orm和Hibernate来支持JPA</td>
</tr>
<tr>
<td>spring-boot-starter-data-mongodb</td>
<td>包含spring-data-mongodb来支持MongoDB</td>
</tr>
<tr>
<td>spring-boot-starter-data-rest</td>
<td>通过spring-data-rest-webmvc支持以REST方式暴露Spring Data仓库</td>
</tr>
<tr>
<td>spring-boot-starter-data-solr</td>
<td>包含spring-data-solr支持Apache Solr搜索平台</td>
</tr>
<tr>
<td>spring-boot-starter-freemarker</td>
<td>支持使用FreeMarker作为模板引擎</td>
</tr>
<tr>
<td>spring-boot-starter-groovy-templates</td>
<td>支持使用groovy作为模板引擎</td>
</tr>
<tr>
<td>spring-boot-starter-hateoas</td>
<td>通过spring-hateoas支持基于HATEOAS的RESTful服务</td>
</tr>
<tr>
<td>spring-boot-starter-hornetq</td>
<td>通过HornetQ支持JMS API</td>
</tr>
<tr>
<td>spring-boot-starter-integration</td>
<td>支持通用spring-integration模块</td>
</tr>
<tr>
<td>spring-boot-starter-jdbc</td>
<td>支持JDBC</td>
</tr>
<tr>
<td>spring-boot-starter-jersey</td>
<td>对Jersey RESTful Web服务框架的支持</td>
</tr>
<tr>
<td>spring-boot-starter-jta-atomikos</td>
<td>通过Atomikos支持JTA分布式事务</td>
</tr>
<tr>
<td>spring-boot-starter-jta-bitronix</td>
<td>通过Bitronix支持JTA分布式事务</td>
</tr>
<tr>
<td>spring-boot-starter-mail</td>
<td>对javax.mail的支持</td>
</tr>
<tr>
<td>spring-boot-starter-mobile</td>
<td>对spring-mobile的支持</td>
</tr>
<tr>
<td>spring-boot-starter-mustache</td>
<td>支持使用Mustache作为模板引擎</td>
</tr>
<tr>
<td>spring-boot-starter-redis</td>
<td>包含spring-redis支持REDIS键值数据存储</td>
</tr>
<tr>
<td>spring-boot-starter-security</td>
<td>支持spring-security</td>
</tr>
<tr>
<td>spring-boot-starter-social-facebook</td>
<td>支持spring-social-facebook</td>
</tr>
<tr>
<td>spring-boot-starter-social-linkedin</td>
<td>支持spring-social-linkedin</td>
</tr>
<tr>
<td>spring-boot-starter-social-twitter</td>
<td>支持spring-social-twitter</td>
</tr>
<tr>
<td>spring-boot-starter-test</td>
<td>对常用测试依赖的支持,包括JUnit, Hamcrest和Mockito,还有spring-test模块</td>
</tr>
<tr>
<td>spring-boot-starter-thymeleaf</td>
<td>对Thymeleaf模板引擎的支持,包括和Spring的集成</td>
</tr>
<tr>
<td>spring-boot-starter-velocity</td>
<td>支持velocity模板引擎</td>
</tr>
<tr>
<td>spring-boot-starter-web</td>
<td>对全栈web开发的支持,包括Tomcat和spring-webmvc</td>
</tr>
<tr>
<td>spring-boot-starter-websocket</td>
<td>支持WebSocket开发支持</td>
</tr>
<tr>
<td>spring-boot-starter-ws</td>
<td>支持Spring Web Services</td>
</tr>
</tbody>
</table>
<p>生产准备的starts</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>spring-boot-starter-actuator</td>
<td>生产环境,监控和管理应用程序</td>
</tr>
<tr>
<td>spring-boot-starter-remote-shell</td>
<td>支持远程ssh shell</td>
</tr>
</tbody>
</table>
<p>可替换spring boot中默认的starters</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>spring-boot-starter-jetty</td>
<td>导入Jetty HTTP引擎,作为Tomcat的替代</td>
</tr>
<tr>
<td>spring-boot-starter-log4j</td>
<td>对Log4J日志系统的支持</td>
</tr>
<tr>
<td>spring-boot-starter-logging</td>
<td>导入Spring Boot的默认日志系统Logback</td>
</tr>
<tr>
<td>spring-boot-starter-tomcat</td>
<td>导入Spring Boot的默认HTTP引擎Tomcat</td>
</tr>
<tr>
<td>spring-boot-starter-undertow</td>
<td>导入Undertow HTTP引擎,作为Tomcat的替代</td>
</tr>
</tbody>
</table>
<p>注意:其他Starters的支持可参考官方文档说明,<a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-starters/README.adoc" target="_blank" rel="external">Starters</a></p>
<h1 id="日志记录"><a href="#日志记录" class="headerlink" title="日志记录"></a>日志记录</h1><p>##Logback<br>日志记录两种方式:</p>
<ol>
<li>在src/main/resources(以Maven项目为例)下面创建logback.xml</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">    &lt;include resource=&quot;org/springframework/boot/logging/logback/base.xml&quot;/&gt;</span><br><span class="line">    &lt;logger name=&quot;org.springframework.web&quot; level=&quot;DEBUG&quot;/&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>
<ol>
<li>在application.properties或者application.yml中配置</li>
</ol>
<p>application.properties:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">logging.level.org.springframework.web=DEBUG</span><br></pre></td></tr></table></figure>
<p>application.yml:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">spring:</span><br><span class="line">logging:</span><br><span class="line">    level:</span><br><span class="line">      org.springframework.web: DEBUG</span><br></pre></td></tr></table></figure>
<p>##Logback多环境配置(yml)参考</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">spring:</span><br><span class="line">  profiles:</span><br><span class="line">    #可在此处选择环境的配置,dev,prod,test</span><br><span class="line">    #也可以在启动时添加参数-Dspring.profiles.active=dev</span><br><span class="line">    active: dev</span><br><span class="line">---</span><br><span class="line">#dev环境</span><br><span class="line">spring:</span><br><span class="line">  profiles: dev</span><br><span class="line"># 日志,logback配置</span><br><span class="line">logging:</span><br><span class="line">  #日志文件</span><br><span class="line">  file: logs/spring-boot-setup.log</span><br><span class="line">  pattern:</span><br><span class="line">    #控制台输出格式</span><br><span class="line">    console: &quot;%d %-5level %logger : %msg%n&quot;</span><br><span class="line">    #文件输出格式</span><br><span class="line">    file: &quot;%d %-5level [%thread] %logger : %msg%n&quot;</span><br><span class="line">  #日志级别</span><br><span class="line">  level:</span><br><span class="line">    org.springframework.web: DEBUG</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">#prod环境</span><br><span class="line">spring:</span><br><span class="line">  profiles: prod</span><br><span class="line"># 日志,logback配置</span><br><span class="line">logging:</span><br><span class="line">  #日志文件</span><br><span class="line">  file: logs/spring-boot-setup.log</span><br><span class="line">  pattern:</span><br><span class="line">    #控制台无输出</span><br><span class="line">    #文件输出格式</span><br><span class="line">    file: &quot;%d %-5level [%thread] %logger : %msg%n&quot;</span><br><span class="line">  #日志级别</span><br><span class="line">  level:</span><br><span class="line">    org.springframework.web: WARN</span><br><span class="line">---</span><br><span class="line">#test环境</span><br><span class="line">spring:</span><br><span class="line">  profiles: test</span><br><span class="line"># 日志,logback配置</span><br><span class="line">logging:</span><br><span class="line">  #日志文件</span><br><span class="line">  file: logs/spring-boot-setup.log</span><br><span class="line">  pattern:</span><br><span class="line">    #控制台输出格式</span><br><span class="line">    console: &quot;%d %-5level %logger : %msg%n&quot;</span><br><span class="line">    #文件输出格式</span><br><span class="line">    file: &quot;%d %-5level [%thread] %logger : %msg%n&quot;</span><br><span class="line">  #日志级别</span><br><span class="line">  level:</span><br><span class="line">    org.springframework.web: INFO</span><br></pre></td></tr></table></figure>
<h1 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h1><h2 id="数据源"><a href="#数据源" class="headerlink" title="数据源"></a>数据源</h2><p>以mysql为例:</p>
<p>注意:使用数据库需要在pom文件中添加spring-boot-starter-jdbc和mysql-connector-java的依赖</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#数据源</span><br><span class="line">  datasource:</span><br><span class="line">    driver-class-name: com.mysql.jdbc.Driver</span><br><span class="line">    url: jdbc:mysql://localhost:3306/xxx-test</span><br><span class="line">    username: root</span><br><span class="line">    password: 123456</span><br></pre></td></tr></table></figure>
<h2 id="数据库连接池"><a href="#数据库连接池" class="headerlink" title="数据库连接池"></a>数据库连接池</h2><h3 id="默认Tomcat-JDBC连接池"><a href="#默认Tomcat-JDBC连接池" class="headerlink" title="默认Tomcat JDBC连接池"></a>默认Tomcat JDBC连接池</h3><p>Spring Boot默认采用Tomcat JDBC连接池</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">datasource:</span><br><span class="line">    max-idle: 10</span><br><span class="line">    max-wait: 10000</span><br><span class="line">    min-idle: 5</span><br><span class="line">    initial-size: 5</span><br><span class="line">    validation-query: SELECT 1</span><br><span class="line">    test-on-borrow: false</span><br><span class="line">    test-while-idle: true</span><br><span class="line">    time-between-eviction-runs-millis: 18800</span><br><span class="line">    jdbc-interceptors: ConnectionState;SlowQueryReport(threshold=0)</span><br></pre></td></tr></table></figure>
<h2 id="Druid"><a href="#Druid" class="headerlink" title="Druid"></a>Druid</h2><p>首先添加上druid的依赖:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;com.alibaba&lt;/groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;druid&lt;/artifactId&gt;</span><br><span class="line">  &lt;version&gt;1.0.18&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
<p>使用其他的连接池,需要配置自己的DataSource bean:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line">@Component</span><br><span class="line">@ConfigurationProperties(prefix = &quot;spring.datasource&quot;)</span><br><span class="line">public class DruidConfig &#123;</span><br><span class="line">    private String url;</span><br><span class="line"></span><br><span class="line">    private String username;</span><br><span class="line"></span><br><span class="line">    private String password;</span><br><span class="line"></span><br><span class="line">    private String driverClassName;</span><br><span class="line"></span><br><span class="line">    private int initialSize;</span><br><span class="line"></span><br><span class="line">    private int maxActive;</span><br><span class="line"></span><br><span class="line">    private int minIdle;</span><br><span class="line"></span><br><span class="line">    private int maxWait;</span><br><span class="line"></span><br><span class="line">    private long timeBetweenEvictionRunsMillis;</span><br><span class="line"></span><br><span class="line">    private long minEvictableIdleTimeMillis;</span><br><span class="line"></span><br><span class="line">    private String validationQuery;</span><br><span class="line"></span><br><span class="line">    private boolean testWhileIdle;</span><br><span class="line"></span><br><span class="line">    private boolean testOnBorrow;</span><br><span class="line"></span><br><span class="line">    private boolean testOnReturn;</span><br><span class="line"></span><br><span class="line">    private boolean poolPreparedStatements;</span><br><span class="line"></span><br><span class="line">    private int maxPoolPreparedStatementPerConnectionSize;</span><br><span class="line"></span><br><span class="line">    private String filters;</span><br><span class="line"></span><br><span class="line">    public DruidConfig() &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public DruidConfig(String url, String username, String password, String driverClassName, int initialSize, int maxActive, int minIdle, int maxWait, long timeBetweenEvictionRunsMillis, long minEvictableIdleTimeMillis, String validationQuery, boolean testWhileIdle, boolean testOnBorrow, boolean testOnReturn, boolean poolPreparedStatements, int maxPoolPreparedStatementPerConnectionSize, String filters) &#123;</span><br><span class="line">        this.url = url;</span><br><span class="line">        this.username = username;</span><br><span class="line">        this.password = password;</span><br><span class="line">        this.driverClassName = driverClassName;</span><br><span class="line">        this.initialSize = initialSize;</span><br><span class="line">        this.maxActive = maxActive;</span><br><span class="line">        this.minIdle = minIdle;</span><br><span class="line">        this.maxWait = maxWait;</span><br><span class="line">        this.timeBetweenEvictionRunsMillis = timeBetweenEvictionRunsMillis;</span><br><span class="line">        this.minEvictableIdleTimeMillis = minEvictableIdleTimeMillis;</span><br><span class="line">        this.validationQuery = validationQuery;</span><br><span class="line">        this.testWhileIdle = testWhileIdle;</span><br><span class="line">        this.testOnBorrow = testOnBorrow;</span><br><span class="line">        this.testOnReturn = testOnReturn;</span><br><span class="line">        this.poolPreparedStatements = poolPreparedStatements;</span><br><span class="line">        this.maxPoolPreparedStatementPerConnectionSize = maxPoolPreparedStatementPerConnectionSize;</span><br><span class="line">        this.filters = filters;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Bean</span><br><span class="line">    @Primary</span><br><span class="line">    public DataSource dataSource() throws Exception&#123;</span><br><span class="line">        DruidDataSource druidDataSource = new DruidDataSource();</span><br><span class="line">        druidDataSource.setUrl(this.url);</span><br><span class="line">        druidDataSource.setUsername(this.username);</span><br><span class="line">        druidDataSource.setPassword(this.password);</span><br><span class="line">        druidDataSource.setDriverClassName(this.driverClassName);</span><br><span class="line">        druidDataSource.setInitialSize(this.initialSize);</span><br><span class="line">        druidDataSource.setMaxActive(this.maxActive);</span><br><span class="line">        druidDataSource.setMinIdle(this.minIdle);</span><br><span class="line">        druidDataSource.setMaxWait(this.maxWait);</span><br><span class="line">        druidDataSource.setTimeBetweenEvictionRunsMillis(this.timeBetweenEvictionRunsMillis);</span><br><span class="line">        druidDataSource.setMinEvictableIdleTimeMillis(this.minEvictableIdleTimeMillis);</span><br><span class="line">        druidDataSource.setValidationQuery(this.validationQuery);</span><br><span class="line">        druidDataSource.setTestWhileIdle(this.testWhileIdle);</span><br><span class="line">        druidDataSource.setTestOnBorrow(this.testOnBorrow);</span><br><span class="line">        druidDataSource.setTestOnReturn(this.testOnReturn);</span><br><span class="line">        druidDataSource.setPoolPreparedStatements(this.poolPreparedStatements);</span><br><span class="line">        druidDataSource.setMaxPoolPreparedStatementPerConnectionSize(this.maxPoolPreparedStatementPerConnectionSize);</span><br><span class="line">        druidDataSource.setFilters(this.filters);</span><br><span class="line">        try &#123;</span><br><span class="line">            if(null != druidDataSource) &#123;</span><br><span class="line">                druidDataSource.setFilters(&quot;wall,stat&quot;);</span><br><span class="line">                druidDataSource.setUseGlobalDataSourceStat(true);</span><br><span class="line">                druidDataSource.init();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            throw new RuntimeException(&quot;load datasource error, dbProperties is :&quot;, e);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return druidDataSource;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"> ...</span><br><span class="line"> geter and setter</span><br><span class="line"> ...</span><br></pre></td></tr></table></figure>
<p>配置druid的数据监控页面路径和拦截路径:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">@Bean</span><br><span class="line">    public ServletRegistrationBean druidServlet() &#123;</span><br><span class="line"></span><br><span class="line">        return new ServletRegistrationBean(new StatViewServlet(), &quot;/druid/*&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Bean</span><br><span class="line">    public FilterRegistrationBean filterRegistrationBean() &#123;</span><br><span class="line">        FilterRegistrationBean filterRegistrationBean = new FilterRegistrationBean();</span><br><span class="line">        filterRegistrationBean.setFilter(new WebStatFilter());</span><br><span class="line">        filterRegistrationBean.addUrlPatterns(&quot;/*&quot;);</span><br><span class="line">        filterRegistrationBean.addInitParameter(&quot;exclusions&quot;, &quot;*.js,*.gif,*.jpg,*.png,*.css,*.ico,/druid/*&quot;);</span><br><span class="line">        return filterRegistrationBean;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>然后浏览器访问<a href="http://localhost:8080/druid即可看到界面" target="_blank" rel="external">http://localhost:8080/druid即可看到界面</a>.</p>
<h1 id="Mybatis集成"><a href="#Mybatis集成" class="headerlink" title="Mybatis集成"></a>Mybatis集成</h1><h2 id="添加依赖"><a href="#添加依赖" class="headerlink" title="添加依赖"></a>添加依赖</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.1.1&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
<h2 id="配置application-yml"><a href="#配置application-yml" class="headerlink" title="配置application.yml"></a>配置application.yml</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#Mybatis配置</span><br><span class="line">mybatis:</span><br><span class="line">  mapperLocations: classpath*:me.cxis.springboot.setup.mapper/*.xml</span><br><span class="line">  typeAliasesPackage: me.cxis.springboot.setup.dto</span><br></pre></td></tr></table></figure>
<h2 id="编写UserMapper接口和UserMapper-xml文件"><a href="#编写UserMapper接口和UserMapper-xml文件" class="headerlink" title="编写UserMapper接口和UserMapper.xml文件"></a>编写UserMapper接口和UserMapper.xml文件</h2><p>UserMapper接口:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@Mapper</span><br><span class="line">public interface UserMapper &#123;</span><br><span class="line">    List&lt;User&gt; getUserList();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>UserMapper.xml文件:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;mapper namespace=&quot;me.cxis.springboot.setup.mapper.UserMapper&quot;&gt;</span><br><span class="line">    &lt;select id=&quot;getUserList&quot; resultType=&quot;me.cxis.springboot.setup.dto.User&quot;&gt;</span><br><span class="line">        select * from t_user;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>
<h1 id="事务管理"><a href="#事务管理" class="headerlink" title="事务管理"></a>事务管理</h1><p>在Application中添加注解<code>@EnableTransactionManagement</code>启用事务管理,在需要开启事务的地方使用注解<code>@Transactional</code></p>
<h1 id="FreeMarker模板引擎"><a href="#FreeMarker模板引擎" class="headerlink" title="FreeMarker模板引擎"></a>FreeMarker模板引擎</h1><h2 id="添加依赖-1"><a href="#添加依赖-1" class="headerlink" title="添加依赖"></a>添加依赖</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;spring-boot-starter-freemarker&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
<h2 id="添加配置"><a href="#添加配置" class="headerlink" title="添加配置"></a>添加配置</h2><p>在application.yml中添加freemarker配置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#freemarker配置</span><br><span class="line">  freemarker:</span><br><span class="line">    cache: false</span><br><span class="line">    charset: UTF-8</span><br><span class="line">    check-template-location: true</span><br><span class="line">    content-type: text/html</span><br><span class="line">    expose-request-attributes: true</span><br><span class="line">    expose-session-attributes: true</span><br><span class="line">    request-context-attribute: request</span><br></pre></td></tr></table></figure>
<h2 id="创建templates目录"><a href="#创建templates目录" class="headerlink" title="创建templates目录"></a>创建templates目录</h2><p>src/main/resources 创建目录 templates,接着在此目录下创建模板文件test.ftl</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Freemarker&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    Date: $&#123;time?date&#125;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    Time: $&#123;time?time&#125;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    Message: $&#123;message&#125;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>编写Controller代码:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@RequestMapping(value = &quot;test&quot;)</span><br><span class="line">    public String testFreeMarker(ModelMap modelMap)&#123;</span><br><span class="line">        modelMap.put(&quot;time&quot;,new Date());</span><br><span class="line">        modelMap.put(&quot;message&quot;,&quot;测试Freemarker&quot;);</span><br><span class="line">        return &quot;test&quot;;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h1 id="集成dubbo"><a href="#集成dubbo" class="headerlink" title="集成dubbo"></a>集成dubbo</h1><h2 id="添加依赖-2"><a href="#添加依赖-2" class="headerlink" title="添加依赖"></a>添加依赖</h2><p>分别添加dubbo,zookeeper,zkclient的依赖,同时需要排除依赖中的spring,log4j等</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;com.alibaba&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;dubbo&lt;/artifactId&gt;</span><br><span class="line">        &lt;version&gt;2.5.3&lt;/version&gt;</span><br><span class="line">        &lt;exclusions&gt;</span><br><span class="line">          &lt;exclusion&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring&lt;/artifactId&gt;</span><br><span class="line">          &lt;/exclusion&gt;</span><br><span class="line">        &lt;/exclusions&gt;</span><br><span class="line">      &lt;/dependency&gt;</span><br><span class="line">      &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;org.apache.zookeeper&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;zookeeper&lt;/artifactId&gt;</span><br><span class="line">        &lt;version&gt;3.4.6&lt;/version&gt;</span><br><span class="line">        &lt;exclusions&gt;</span><br><span class="line">          &lt;exclusion&gt;</span><br><span class="line">            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;</span><br><span class="line">          &lt;/exclusion&gt;</span><br><span class="line">          &lt;exclusion&gt;</span><br><span class="line">            &lt;groupId&gt;log4j&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;log4j&lt;/artifactId&gt;</span><br><span class="line">          &lt;/exclusion&gt;</span><br><span class="line">        &lt;/exclusions&gt;</span><br><span class="line">      &lt;/dependency&gt;</span><br><span class="line">      &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;com.github.sgroschupf&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;zkclient&lt;/artifactId&gt;</span><br><span class="line">        &lt;version&gt;0.1&lt;/version&gt;</span><br><span class="line">      &lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
<h2 id="服务提供方"><a href="#服务提供方" class="headerlink" title="服务提供方"></a>服务提供方</h2><p>添加dubbo.properties文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">dubbo.container=log4j,spring</span><br><span class="line">dubbo.application.name=tb-core</span><br><span class="line">dubbo.application.owner=</span><br><span class="line">#dubbo.registry.address=multicast://224.5.6.7:1234</span><br><span class="line">dubbo.registry.address=zookeeper\://127.0.0.1\:2181</span><br><span class="line">#dubbo.registry.address=redis://127.0.0.1:6379</span><br><span class="line">#dubbo.registry.address=dubbo://127.0.0.1:9090</span><br><span class="line">dubbo.monitor.protocol=registry</span><br><span class="line">dubbo.protocol.name=dubbo</span><br><span class="line">dubbo.protocol.port=20881</span><br><span class="line">dubbo.service.loadbalance=roundrobin</span><br><span class="line">dubbo.log4j.file=logs/SpringBootDubboProvider.log</span><br><span class="line">dubbo.log4j.level=DEBUG</span><br></pre></td></tr></table></figure>
<p>添加dubbo-provider.xml</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">       xmlns:dubbo=&quot;http://code.alibabatech.com/schema/dubbo&quot;</span><br><span class="line">       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans</span><br><span class="line">       http://www.springframework.org/schema/beans/spring-beans.xsd</span><br><span class="line">       http://code.alibabatech.com/schema/dubbo</span><br><span class="line">	   http://code.alibabatech.com/schema/dubbo/dubbo.xsd&quot;&gt;</span><br><span class="line">       &lt;bean id=&quot;userService&quot; class=&quot;me.cxis.springboot.setup.service.impl.UserServiceImpl&quot;&gt;&lt;/bean&gt;</span><br><span class="line">       &lt;dubbo:service timeout=&quot;3000&quot; retries=&quot;0&quot; interface=&quot;me.cxis.springboot.setup.service.UserService&quot; ref=&quot;userService&quot;/&gt;</span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>
<p>在application添加注解,导入dubbo配置文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@ImportResource(&quot;classpath*:dubbo-provider.xml&quot;)</span><br><span class="line">public class Application &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        SpringApplication.run(Application.class,args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="服务消费方"><a href="#服务消费方" class="headerlink" title="服务消费方"></a>服务消费方</h2><p>添加dubbo.properties文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">dubbo.container=log4j,spring</span><br><span class="line">dubbo.application.name=SpringBootDubboConsumer</span><br><span class="line">dubbo.application.owner=</span><br><span class="line">#dubbo.registry.address=multicast://224.5.6.7:1234</span><br><span class="line">dubbo.registry.address=zookeeper\://127.0.0.1\:2181</span><br><span class="line">#dubbo.registry.address=redis://127.0.0.1:6379</span><br><span class="line">#dubbo.registry.address=dubbo://127.0.0.1:9090</span><br><span class="line">dubbo.monitor.protocol=registry</span><br><span class="line">dubbo.protocol.name=dubbo</span><br><span class="line">dubbo.protocol.port=20884</span><br><span class="line">dubbo.service.loadbalance=roundrobin</span><br><span class="line">dubbo.log4j.file=logs/SpringBootDubboConsumer.log</span><br><span class="line">dubbo.log4j.level=DEBUG</span><br></pre></td></tr></table></figure>
<p>添加dubbo-consumer.xml</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; </span><br><span class="line">	xmlns:dubbo=&quot;http://code.alibabatech.com/schema/dubbo&quot;</span><br><span class="line">	xsi:schemaLocation=&quot;</span><br><span class="line">	http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd  </span><br><span class="line">	http://code.alibabatech.com/schema/dubbo http://code.alibabatech.com/schema/dubbo/dubbo.xsd&quot;&gt;</span><br><span class="line"></span><br><span class="line">	&lt;dubbo:reference id=&quot;userService&quot; interface=&quot;me.cxis.springboot.setup.service.UserService&quot;/&gt;</span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>
<p>在application添加注解,导入dubbo配置文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@ImportResource(&quot;classpath*:dubbo-consumer.xml&quot;)</span><br><span class="line">public class Application &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        SpringApplication.run(Application.class,args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p><a href="http://docs.spring.io/spring-boot/docs/current/reference/htmlsingle" target="_blank" rel="external">http://docs.spring.io/spring-boot/docs/current/reference/htmlsingle</a></p>
<p><a href="https://www.ibm.com/developerworks/cn/java/j-lo-spring-boot/" target="_blank" rel="external">https://www.ibm.com/developerworks/cn/java/j-lo-spring-boot/</a></p>
<p><a href="https://qbgbook.gitbooks.io/spring-boot-reference-guide-zh/content/" target="_blank" rel="external">https://qbgbook.gitbooks.io/spring-boot-reference-guide-zh/content/</a></p>
<p><a href="https://springframework.guru/using-yaml-in-spring-boot-to-configure-logback/" target="_blank" rel="external">https://springframework.guru/using-yaml-in-spring-boot-to-configure-logback/</a></p>
<p><a href="http://blog.csdn.net/catoop/article/details/50501714" target="_blank" rel="external">http://blog.csdn.net/catoop/article/details/50501714</a></p>
<p><a href="http://my.oschina.net/angerbaby/blog/552936" target="_blank" rel="external">http://my.oschina.net/angerbaby/blog/552936</a></p>
<p><a href="http://www.voidcn.com/blog/yingxiake/article/p-5930835.html" target="_blank" rel="external">http://www.voidcn.com/blog/yingxiake/article/p-5930835.html</a></p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        
  <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
    <div>坚持原创技术分享，您的支持将鼓励我继续创作！</div>
    <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
      <span>赏</span>
    </button>
    <div id="QR" style="display: none;">
      
        <div id="wechat" style="display: inline-block">
          <img id="wechat_qr" src="/images/wechatpay.jpg" alt="dachengxi WeChat Pay"/>
          <p>微信打赏</p>
        </div>
      
      
        <div id="alipay" style="display: inline-block">
          <img id="alipay_qr" src="/images/alipay.jpg" alt="dachengxi Alipay"/>
          <p>支付宝打赏</p>
        </div>
      
    </div>
  </div>


      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/SpringBoot教程/" rel="tag"># SpringBoot教程</a>
          
            <a href="/tags/SpringBoot/" rel="tag"># SpringBoot</a>
          
        </div>
      

      
        
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/07/01/tomcat-与memcached-session-manager共享session测试/" rel="next" title="tomcat与memcached-session-manager共享session测试">
                <i class="fa fa-chevron-left"></i> tomcat与memcached-session-manager共享session测试
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/07/29/我的计算机之路/" rel="prev" title="我的计算机之路">
                我的计算机之路 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.jpg"
               alt="dachengxi" />
          <p class="site-author-name" itemprop="name">dachengxi</p>
           
              <p class="site-description motion-element" itemprop="description">一个小学生</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">81</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">32</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">101</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/dachengxi" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/dachengxi" target="_blank" title="微博">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  微博
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://git.oschina.net/dachengxi" target="_blank" title="码云">
                  
                    <i class="fa fa-fw fa-git"></i>
                  
                  码云
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              友链
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://hexo.io" title="Hexo" target="_blank">Hexo</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://github.com/iissnan/hexo-theme-next" title="Next Theme" target="_blank">Next Theme</a>
                </li>
              
            </ul>
          </div>
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#构建工具配置"><span class="nav-number">1.</span> <span class="nav-text">构建工具配置</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Maven"><span class="nav-number">1.1.</span> <span class="nav-text">Maven</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#继承spring-boot-starter-parent"><span class="nav-number">1.1.1.</span> <span class="nav-text">继承spring-boot-starter-parent</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用依赖管理"><span class="nav-number">1.1.2.</span> <span class="nav-text">使用依赖管理</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Gradle"><span class="nav-number">1.2.</span> <span class="nav-text">Gradle</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#spring-boot-starter列表"><span class="nav-number">2.</span> <span class="nav-text">spring-boot-starter列表</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#日志记录"><span class="nav-number">3.</span> <span class="nav-text">日志记录</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#数据库"><span class="nav-number">4.</span> <span class="nav-text">数据库</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#数据源"><span class="nav-number">4.1.</span> <span class="nav-text">数据源</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数据库连接池"><span class="nav-number">4.2.</span> <span class="nav-text">数据库连接池</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#默认Tomcat-JDBC连接池"><span class="nav-number">4.2.1.</span> <span class="nav-text">默认Tomcat JDBC连接池</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Druid"><span class="nav-number">4.3.</span> <span class="nav-text">Druid</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Mybatis集成"><span class="nav-number">5.</span> <span class="nav-text">Mybatis集成</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#添加依赖"><span class="nav-number">5.1.</span> <span class="nav-text">添加依赖</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#配置application-yml"><span class="nav-number">5.2.</span> <span class="nav-text">配置application.yml</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#编写UserMapper接口和UserMapper-xml文件"><span class="nav-number">5.3.</span> <span class="nav-text">编写UserMapper接口和UserMapper.xml文件</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#事务管理"><span class="nav-number">6.</span> <span class="nav-text">事务管理</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#FreeMarker模板引擎"><span class="nav-number">7.</span> <span class="nav-text">FreeMarker模板引擎</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#添加依赖-1"><span class="nav-number">7.1.</span> <span class="nav-text">添加依赖</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#添加配置"><span class="nav-number">7.2.</span> <span class="nav-text">添加配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#创建templates目录"><span class="nav-number">7.3.</span> <span class="nav-text">创建templates目录</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#集成dubbo"><span class="nav-number">8.</span> <span class="nav-text">集成dubbo</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#添加依赖-2"><span class="nav-number">8.1.</span> <span class="nav-text">添加依赖</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#服务提供方"><span class="nav-number">8.2.</span> <span class="nav-text">服务提供方</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#服务消费方"><span class="nav-number">8.3.</span> <span class="nav-text">服务消费方</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#参考"><span class="nav-number">9.</span> <span class="nav-text">参考</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2014 - 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">dachengxi</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  

    <script type="text/javascript">
      var disqus_shortname = 'cxis';
      var disqus_identifier = '2016/07/08/SpringBoot简易教程/';

      var disqus_title = "SpringBoot简易教程";


      function run_disqus_script(disqus_script) {
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }

      run_disqus_script('count.js');

      
        var disqus_config = function () {
            this.page.url = disqus_url;
            this.page.identifier = disqus_identifier;
            this.page.title = disqus_title;
        };
        run_disqus_script('embed.js');
      

    </script>
  










  
  
  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
      search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.popup').toggle();
    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';
      $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = $( "entry", xmlResponse ).map(function() {
            return {
              title: $( "title", this ).text(),
              content: $("content",this).text(),
              url: $( "url" , this).text()
            };
          }).get();
          var $input = document.getElementById(search_id);
          var $resultContent = document.getElementById(content_id);
          $input.addEventListener('input', function(){
            var matchcounts = 0;
            var str='<ul class=\"search-result-list\">';
            var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
            $resultContent.innerHTML = "";
            if (this.value.trim().length > 1) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var content_index = [];
                var data_title = data.title.trim().toLowerCase();
                var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                var data_url = decodeURIComponent(data.url);
                var index_title = -1;
                var index_content = -1;
                var first_occur = -1;
                // only match artiles with not empty titles and contents
                if(data_title != '') {
                  keywords.forEach(function(keyword, i) {
                    index_title = data_title.indexOf(keyword);
                    index_content = data_content.indexOf(keyword);
                    if( index_title >= 0 || index_content >= 0 ){
                      isMatch = true;
                      if (i == 0) {
                        first_occur = index_content;
                      }
                    }

                  });
                }
                // show search results
                if (isMatch) {
                  matchcounts += 1;
                  str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                  var content = data.content.trim().replace(/<[^>]+>/g,"");
                  if (first_occur >= 0) {
                    // cut out 100 characters
                    var start = first_occur - 20;
                    var end = first_occur + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if(start == 0){
                      end = 50;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    var match_content = content.substring(start, end);
                    // highlight all keywords
                    keywords.forEach(function(keyword){
                      var regS = new RegExp(keyword, "gi");
                      match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                    });

                    str += "<p class=\"search-result\">" + match_content +"...</p>"
                  }
                  str += "</li>";
                }
              })};
            str += "</ul>";
            if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
            if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
            $resultContent.innerHTML = str;
          });
          proceedsearch();
        }
      });}

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>


  

  

  

  


  
<a href="https://github.com/dachengxi"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/e7bbb0521b397edbd5fe43e7f760759336b5e05f/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f677265656e5f3030373230302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png"></a>
</body>
</html>
